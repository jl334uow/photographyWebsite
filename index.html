<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8"/>
  <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
  <title>JUSTINLUPHOTOGRAPHY</title>
  <link href="https://fonts.googleapis.com/css?family=Alata&display=swap" rel="stylesheet">
  <link rel = "stylesheet" href = "style.css">
</head>
<body>
  <div class = "container">
    <!-- Nav wrapper -->
    <div class = "navigation-wrapper">

      <div class = "left-side">
        <div class = "navigation-link-wrapper active-nav-link">
          <a href = "index.html">Home</a>
        </div>
        <div class = "navigation-link-wrapper">
          <a href = "portrait.html">Portraits</a>
        </div>
        <div class = "navigation-link-wrapper">
          <a href = "event.html">Events</a>
        </div>
        <div class = "navigation-link-wrapper">
          <a href = "travel.html">Travel</a>
        </div>
        <div class = "navigation-link-wrapper">
          <a href = "pricing.html">Pricing</a>
        </div>
        <div class = "navigation-link-wrapper">
          <a href = "contact.html">Contact</a>
        </div>
        <div class = "navigation-link-wrapper">
          <a href = "about.html">About</a>
        </div>
      </div>

      <div class = "right-side"
        <div class = "bread">
        <div>JUSTIN LU PHOTOGRAPHY</div>
        </div>
      </div>

    </div>
<!-- _MG_4227 -->
    <!-- Content wrapper -->
    <div class = "content-wrapper">
      <div class = "portfolio-items-wrapper" id = "portfolio-items-wrapper">
        <div class = "portfolio-item-wrapper">
          <div class = "portfolio-img-background" style = "background-image:url(compressed/IMG_1658.jpg)"></div>
          <div class = "img-text-wrapper">
            <div class = "subtitle">
              Events
            </div>
          </div>
        </div>

        <div class = "portfolio-item-wrapper">
          <div class = "portfolio-img-background" style = "background-image:url(compressed/IMG_1661.jpg)"></div>
          <div class = "img-text-wrapper">
            <div class = "subtitle">
              Portraits
            </div>
          </div>
        </div>

        <div class = "portfolio-item-wrapper">
          <div class = "portfolio-img-background" style = "background-image:url(compressed/IMG_1721.jpg)"></div>
          <div class = "img-text-wrapper">
            <div class = "subtitle">
              Editorial
            </div>
          </div>
        </div>

        <div class = "portfolio-item-wrapper">
          <div class = "portfolio-img-background" style = "background-image:url(compressed/IMG_1746.jpg)"></div>
          <div class = "img-text-wrapper">
            <div class = "subtitle">
              Travel
            </div>
          </div>
        </div>

        <div class = "portfolio-item-wrapper">
          <div class = "portfolio-img-background" style = "background-image:url(compressed/IMG_1797.jpg)"></div>
          <div class = "img-text-wrapper">
            <div class = "subtitle">
              About
            </div>
          </div>
        </div>

        <div class = "portfolio-item-wrapper">
          <div class = "portfolio-img-background" style = "background-image:url(compressed/IMG_1809.jpg)"></div>
          <div class = "img-text-wrapper">
            <div class = "subtitle">
              Contact
            </div>
          </div>
        </div>
      </div>
      <div id = "loading" style="display: none;">
        Loading...
      </div>
    </div>

  </div> <!--container-->
</body>

<script>
  const portfolioItems = document.querySelectorAll('.portfolio-item-wrapper')

  portfolioItems.forEach(
    portfolioItem =>{
      portfolioItem.addEventListener('mouseover', () => {
        portfolioItem.childNodes[1].classList.add('img-darken');
      })

      portfolioItem.addEventListener('mouseout', () => {
        portfolioItem.childNodes[1].classList.remove('img-darken');
      })
    }

  )
</script>

<script>
  const imagePaths = [
    "compressed/IMG_1658.jpg",
    "compressed/IMG_1661.jpg",
    "compressed/IMG_1721.jpg",
    "compressed/IMG_1746.jpg",
    "compressed/IMG_1809.jpg",
    "compressed/IMG_1833.jpg",
    "compressed/IMG_1841.jpg",
    "compressed/IMG_1851.jpg",
    "compressed/IMG_1878.jpg",
    "compressed/IMG_1954.jpg",
    "compressed/IMG_1964.jpg",
    "compressed/IMG_1969.jpg",
    "compressed/IMG_1971.jpg",
    "compressed/IMG_1996.jpg"
  ]

  let photosPerLoad = 3;
  let curIndex = 0;
  let loading = false;

  function loadMorePhotos() {
    if(loading) return; /* stop function if loading is already in progress */

    loading = true;

    document.getElementById('loading').style.display = 'block';

    const gallery = document.getElementById('portfolio-items-wrapper');
    const end = Math.min(curIndex + photosPerLoad, imagePaths.length);

    for(let i = curIndex; i < end; i++) {
      const divItemWrapper = document.createElement('div');
      divItemWrapper.className = 'portfolio-item-wrapper';

      const divImgBackground = document.createElement('div');
      divImgBackground.className = 'portfolio-img-background';
      divImgBackground.style.backgroundImage = `url(${imagePaths[i]})`;

      divItemWrapper.appendChild(divImgBackground);
      gallery.appendChild(divItemWrapper)
    }

    curIndex = end;

    document.getElementById('loading').style.display = 'none';
    loading = false;
  }

  function handleScroll() {
    if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 300) {
      loadMorePhotos();
    }
  }

  loadMorePhotos();
  window.addEventListener('scroll', handleScroll);

</script>
</html>
